---
name: semljsyn
title: Structural Equation Modelling
jrs: '1.0'


items:
  - name: model
    type: Property
    description: The underlying `lavaan` object
    visible: (FALSE)


  # Model overview and examples ===============================================
  - name: info
    title: Models Info
    type: Table
#   description: 
    refs: semlj    
    clearWith:
      - code
    columns:
      - name: info
        type: text
        title: ""
        combineBelow: true
      - name: value
        type: text
        title: ""
      - name: specs
        type: text
        title: ""
        combineBelow: true

  - name: contraintsnotes
    type: Table
#   description:     
    visible: (constraints_examples)
    title: "Syntax examples"
    columns:
      - name: info
        type: text
        title: Aim
      - name: example
        type: text
        title: Example
      - name: com
        type: text
        title: Outcome


  # Overall Tests =============================================================
  - name: fit
    title: "Overall Tests"
    type: Group
    visible: false
    clearWith:
      - code
    items:

      # Model tests -----------------------------------------------------------
      - name: main
        title: Model tests
        type: Table
#       description: 
        clearWith:
          - ciType
          - cov_y
          - code
        columns:
          - name: label
            title: Label
            type: text
          - name: chisq
            title:  X²
            type: number
          - name:  df
            title: "df"
            type: integer
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue

      # Constraints score tests -----------------------------------------------
      # OUTPUT DOESN'T SEEM TO BE IMPLEMENTED YET
      - name: constraints
        title: Constraints score tests
        type: Table
#       description: 
        visible: false
        clearWith:
          - ciType
          - cov_y
          - code
        columns:
          - name: type
            type: text
            title: Type
            visible: true
            combineBelow: true
          - name: lhs
            title: Par 1
            type: text
          - name: op
            title: ""
            type: text
          - name: rhs
            title: Par 2
            type: text
          - name: chisq
            title:  X²
            type: number
          - name:  df
            title: "df"
            type: integer
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue

      # Fit indices -----------------------------------------------------------
      - name: indices
        title: Fit indices
        type: Table
#       description: 
        clearWith:
          - endogenous
          - covs
          - factors
          - ciType
          - contrasts
          - cov_y
          - constraints
        columns:
          - name:  aic
            title: AIC
            visible: (estimator:ML)
            type: number
          - name:  bic
            title: BIC
            type: number
            visible: (estimator:ML)
          - name:  bic2
            title: "adj. BIC"
            type: number
            visible: (estimator:ML)
          - name:  srmr
            title: SRMR
            type: number
            format: zto
          - name: rmsea
            title:  RMSEA
            type: number
            format: zto
          - name:  rmsea.ci.lower
            title: Lower
            type: number
            format: zto
          - name:  rmsea.ci.upper
            title: Upper
            type: number
            format: zto
          - name: rmsea.pvalue
            title: 'RMSEA p'
            type: number
            format: zto,pvalue


  # Estimates =================================================================
  - name: models
    title: "Estimates"
    type: Group
    visible: false
    items:

      # Parameter estimates ---------------------------------------------------
      - name: coefficients
        title: Parameter estimates
        type: Table
#       description: 
        refs: lavaan
        clearWith:
          - ciType
          - contrasts
          - cov_y
          - data
          - multigroup
          - code
        columns:
          - name: lgroup
            title: Group
            type: text
            visible: (multigroup)
            combineBelow: true
          - name: label
            title: Label
            type: text
            visible: (showlabels)
          - name: lhs
            title: "Dep"
            type: text
          - name:  rhs
            title: "Pred"
            type: text
          - name: est
            title: "Estimate"
            type: number
          - name: se
            title: "SE"
            type: number
          - name: ci.lower
            type: number
            title: Lower
            visible: (ci)
          - name: ci.upper
            type: number
            title: Upper
            visible: (ci)
          - name: std.all
            type: number
            title: β
          - name: z
            title: "z"
            type: number
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue

      # Measurement model -----------------------------------
      - name: loadings
        title: Measurement model
        type: Table
#       description: 
        visible: false
        clearWith:
          - ciType
          - contrasts
          - cov_y
          - data
          - multigroup
          - code
        columns:
          - name: lgroup
            title: Group
            type: text
            visible: (multigroup)
            combineBelow: true
          - name: label
            title: Label
            type: text
            visible: (showlabels)
          - name: lhs
            title: "Latent"
            type: text
            combineBelow: true
          - name:  rhs
            title: "Observed"
            type: text
          - name: est
            title: "Estimate"
            type: number
          - name: se
            title: "SE"
            type: number
          - name: ci.lower
            type: number
            title: Lower
            visible: (ci)
          - name: ci.upper
            type: number
            title: Upper
            visible: (ci)
          - name: std.all
            type: number
            title: β
          - name: z
            title: "z"
            type: number
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue

      - name: composites
        title: Composites
        type: Table
#       description: 
        visible: false
        clearWith:
          - ciType
          - contrasts
          - cov_y
          - data
          - multigroup
          - code
        columns:
          - name: lgroup
            title: Group
            type: text
            visible: (multigroup)
            combineBelow: true
          - name: label
            title: Label
            type: text
            visible: (showlabels)
          - name: lhs
            title: "Formative"
            type: text
            combineBelow: true
          - name:  rhs
            title: "Observed"
            type: text
          - name: est
            title: "Estimate"
            type: number
          - name: se
            title: "SE"
            type: number
          - name: ci.lower
            type: number
            title: Lower
            visible: (ci)
          - name: ci.upper
            type: number
            title: Upper
            visible: (ci)
          - name: std.all
            type: number
            title: β
          - name: z
            title: "z"
            type: number
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue



      # Intercepts ------------------------------------------------------------
      - name: intercepts
        title: Intercepts
        type: Table
#       description: 
        visible: false
        clearWith:
          - ciType
          - cov_y
          - data
          - multigroup
          - code
        columns:
          - name: lgroup
            title: Group
            type: text
            visible: (multigroup)
            combineBelow: true
          - name: label
            title: Label
            type: text
            visible: (showlabels)
          - name: lhs
            title: "Variable"
            type: text
          - name: est
            title: "Intercept"
            type: number
            format: zto
          - name: se
            title: "SE"
            type: number
            format: zto
          - name: ci.lower
            type: number
            title: Lower
            visible: (ci)
            format: zto
          - name: ci.upper
            type: number
            title: Upper
            visible: (ci)
            format: zto
          - name: z
            title: "z"
            type: number
            format: zto
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue

      # Defined parameters ----------------------------------------------------
      - name: defined
        title: Defined parameters
        type: Table
#       description: 
        visible: false
        clearWith:
          - ciType
          - cov_y
          - data
          - multigroup
          - code
        columns:
          - name: lhs
            title: "Label"
            type: text
          - name: desc
            title: "Description"
            type: text
          - name:  rhs
            title: "Parameter"
            type: text
          - name: est
            title: "Estimate"
            type: number
            format: zto
          - name: se
            title: "SE"
            type: number
            format: zto
          - name: ci.lower
            type: number
            title: Lower
            visible: (ci)
            format: zto
          - name: ci.upper
            type: number
            title: Upper
            visible: (ci)
            format: zto
          - name: std.all
            type: number
            title: β
            format: zto
          - name: z
            title: "z"
            type: number
            format: zto
          - name: pvalue
            title: "p"
            type: number
            format: zto,pvalue


  # Additional outputs ========================================================
  - name: add_outputs
    title: "Additional outputs"
    type: Group
    visible: (outputAdditionalFitMeasures || outputRSquared || outputMardiasCoefficients)
    items:

      # Additional fit measures (1): User model versus baseline model ---------
      - name: compModelBsl
        title: 'User model versus baseline model'
        type: Table
#       description:
        visible: (outputAdditionalFitMeasures)
        clearWith:
        rows: 8
        columns:
          - name: name
            title: ""
            type: text
          - name: statistics
            title: Model
            type: number
            format: zto
      # Additional fit measures (2): Other fit indices ------------------------
      - name: otherFit
        title: 'Other fit indices'
        type: Table
#       description:
        visible: (outputAdditionalFitMeasures)
        clearWith:
        rows: 5
        columns:
          - name: name
            title: ""
            type: text
          - name: statistics
            title: Model
            type: number

      # R² measures -----------------------------------------------------------
      - name: Rsquared
        title: 'R²-values of the endogenous variables'
        type: Table
#       description:
        visible: (outputRSquared)
        clearWith:
#       variable number of rows
        columns:
          - name:  lgroup
            title: Group
            type: text
            visible: (multigroup)
          - name: label
            title: Label
            type: text
            visible: (showlabels)
          - name: rhs
            title: "Variable"
            type: text
          - name: est
            title: R²
            type: number

      # Mardia's coefficients -------------------------------------------------
      - name: mardia
        title: "Mardia's coefficients"
        type: Table
#       description:
        refs: semtools
        visible: (outputMardiasCoefficients)
        clearWith:
        rows: 2
        columns:
        - name: name
          title: ""
          type: text
        - name: coeff
          title: Coefficient
          type: number
        - name: z
          title: z
          type: number
        - name: chi
          title: χ²
          type: number
        - name: df
          title: df
          type: integer
        - name: p
          title: p
          type: number
          format: zto,pvalue


  # Covariances and correlations ==============================================
  - name: group_covariances
    title: "Covariances and correlations"
    type: Group
    visible: (outputObservedCovariances || outputImpliedCovariances || outputResidualCovariances)
    items:

    # all tables below have variable number of rows and columns
    # Observed covariances and correlations -----------------------------------
    - name: covcorrObserved
      title: Observed covariances (lower triangle) and correlations (upper triangle)
      type: Table
      visible: false
      description: A covariance / correlation matrix table.
      clearWith:
        - ciType
        - cov_y
        - data
        - multigroup
        - code
      columns:
      - name: variable
        title: ""
        type: text

    # Model-implied / fitted covariances and correlations ---------------------
    - name: covcorrImplied
      title: Fitted covariances (lower triangle) and correlations (upper triangle)
      type: Table
      visible: false
      description: A covariance / correlation matrix table.
      clearWith:
        - ciType
        - cov_y
        - data
        - multigroup
        - code
      columns:
      - name: variable
        title: ""
        type: text

    # Residual covariances and correlations -----------------------------------
    - name: covcorrResidual
      title: Residual covariances (lower triangle) and correlations (upper triangle)
      type: Table
      visible: false
      description: A covariance / correlation matrix table.
      clearWith:
        - ciType
        - cov_y
        - data
        - multigroup
        - code
      columns:
      - name: variable
        title: ""
        type: text

    # Combined covariances and correlations (sorted by variable; observed,
    # implied, residual within a cell -----------------------------------------
    - name: covcorrCombined
      title: Covariances (lower triangle) and correlations (upper triangle)
      type: Table
      visible: false
      description: A covariance / correlation matrix table.
      clearWith:
        - ciType
        - cov_y
        - data
        - multigroup
        - code
      columns:
      - name: variable
        title: ""
        type: text
        combineBelow: true
      - name: type
        title: ""
        type: text


  # Modification indices ======================================================
  - name: modgroup
    title: "Modifcation indices"
    type: Group
    visible: (outputModificationIndices)
    clearWith:
      - ciType
      - cov_y
      - data
      - multigroup
      - code
    items:
      - name: modInd
        title: 'Modification indices'
        type: Table
        visible: (outputModificationIndices)
#       description:
        notes:
          EPC: expected parameter changes and their standardized forms (sEPC); for latent variables (LV),
            all variables (all), and latent and observed variables except for the exogenous observed variables (nox)
#       variable number of rows
        columns:
          - name:  lgroup
            title: Group
            type: text
            visible: (multigroup)
          - name: lhs
            title: ""
            type: text
          - name: op
            title: ""
            type: text
          - name: rhs
            title: ""
            type: text
          - name: mi
            title: Modif. index
            type: number
          - name: epc
            title: EPC
            type: number
            format: zto
          - name: sepc.lv
            title: sEPC (LV)
            type: number
            format: zto
          - name: sepc.all
            title: sEPC (all)
            type: number
            format: zto
          - name: sepc.nox
            title: sEPC (nox)
            type: number
            format: zto



  # Path model ================================================================
  - name: pathgroup
    type: Group
    title: Path Model
    visible: (diagram)
    clearWith:
      - cov_y
      - data
      - multigroup
      - code
      - diag_shape_man
      - diag_shape_lat
      - diag_abbrev
      - diag_type
      - diag_rotate
      - diag_labsize
      - diag_resid
      - diag_paths
      - dia_intercepts
    items:

    # Path diagrams -----------------------------------------------------------
      - name: diagrams
        title: Path diagrams
        type: Array
        description: an array of path diagrams
        refs: semplot        
        visible: (diagram)
        template:
          title: $key
          type: Image
          renderFun: .showDiagram
          width: 800
          height: 600
          clearWith:
            - cov_y
            - data
            - multigroup
            - code
            - diag_shape_man
            - diag_shape_lat
            - diag_abbrev
            - diag_type
            - diag_rotate
            - diag_labsize
            - diag_resid
            - diag_paths
            - diag_intercepts

    # Path diagram notes ------------------------------------------------------
      - name: notes
        type: Table
        title: ""
#       description:
        visible: false
        columns:
          - name: message
            type: text
            title: "Model diagram notes"
